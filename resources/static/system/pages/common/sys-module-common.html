<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
</head>
<body>
	<!--说明：系统中公共模块的提取
				1.sys signatrue-self panel  fragment 自己签名时签名面板
				2.sys signatrue-wf panel  fragment 与他人工作流签名时签名面板
				3.sys signatrue-seals panel  fragment 制作签名面板
	-->
	<!-- ------------------------------------------- -->
	<!-- sys signatrue-self panel  fragment -->
	<!-- ------------------------------------------- -->
	<div th:fragment="copy-sign-self-panel" id="signaturePanel" title="选择签名">
		<div id="signatureTab">
			 <ul id="signatureTab-list" class="horizontal-list">
			 	   <li id="signatureStore-link" class="active"><a href="javascript:;">我的印章/签名</a></li>
				   <li id="signaturePut-link"><a href="javascript:;">输入签名</a></li>
				   <li id="signatureUpload-link"><a href="javascript:;">上传签章</a></li>
				   <li id="signatureScan-link"><a href="javascript:;">扫码签名</a></li>
				   <!--按此规律可继续添加多个tab-->
			 </ul>
			 <div th:replace="this  :: this-copy-sign-store">此处签名面板动态复用储存印章tab</div>
			 <div th:replace="this  :: this-copy-sign-putin">此处签名面板动态复用实时输入文字tab</div>
			 <div th:replace="this  :: this-copy-sign-upload">此处签名面板动态复用上传图片tab</div>
			 <div th:replace="this  :: this-copy-sign-scan">此处签名面板动态复用扫码签</div>
			 <!--按此规律可继续添加多个tab面板-->
		</div>
	</div>	
	 
	 
	<!-- ------------------------------------------- -->
	<!-- sys signatrue-wf panel  fragment -->
	<!-- ------------------------------------------- -->
	<div th:fragment="copy-sign-wf-panel" id="signaturePanel" title="制作签章">
	<div id="signatureTab">
		  <ul id="signatureTab-list" class="horizontal-list">
			    <li id="signaturePut-link" class="active"><a href="javascript:;">输入签名</a></li>
			   <li id="signatureUpload-link"><a href="javascript:;">上传签章</a></li>
			   <li id="signatureScan-link"><a href="javascript:;">扫码签名</a></li>
			    <!--按此规律可继续添加多个tab-->
		  </ul>
		  <div th:replace="this  :: this-copy-sign-putin">此处签名面板动态复用实时输入文字tab</div>
		  <div th:replace="this  :: this-copy-sign-upload">此处签名面板动态复用上传图片tab</div>
		  <div th:replace="this  :: this-copy-sign-scan">此处签名面板动态复用扫码签</div>
		   <!--按此规律可继续添加多个tab面板-->
		</div>
	</div>
	
	<!-- ------------------------------------------- -->
	<!-- sys signatrue-seals panel  fragment -->
	<!-- ------------------------------------------- -->
	<div th:fragment="copy-sign-seals-panel" id="signaturePanel" title="制作签章">
	<div id="signatureTab">
		  <ul id="signatureTab-list" class="horizontal-list">
			    <li id="signaturePut-link" class="active"><a href="javascript:;">输入签名</a></li>
			   	<li id="signatureScan-link"><a href="javascript:;">扫码签名</a></li>
			   	<li id="uploadScan-link"><a href="javascript:;">上传签名</a></li>
			    <!--按此规律可继续添加多个tab-->
		  </ul>
		  <div th:replace="this  :: this-copy-sign-putin">此处签名面板动态复用实时输入文字tab</div>
		  <div th:replace="this  :: this-copy-sign-scan">此处签名面板动态复用扫码签</div>
		  <div th:replace="this  :: this-copy-sign-uploadscan">此处签名面板动态复用扫码签</div>
		   <!--按此规律可继续添加多个tab面板-->
		</div>
	</div>
	
	<!-- ------------------------------------------- -->
	<!-- "store" block fragment for tab "signatureStore-link"-->
	<!-- ------------------------------------------- -->
	<div th:fragment="this-copy-sign-store" id="signatureStore-block" name="store" class="signature-block hidden">
  		<div class="body-content-container">
  			<p class="js-store-title mt10 fontColor-default">选择我已有的签名或签章(点击选择)</p>
  			<ul id="js-store-lists" class="store-content"></ul>
  		</div>
  		<div class="footer-bar-container textRight"><span id="insert-store-seal" title="插入签名" class="btn-success-m">插入</span></div>
	</div>
	<!-- ------------------------------------------- -->
	<!-- "putin" block fragment for tab "signaturePut-link"-->
	<!-- ------------------------------------------- -->
	<div th:fragment="this-copy-sign-putin" id="signaturePut-block" name="putin" class="signature-block hidden">
  		<div class="body-content-container">
	  		<p class="mt10 fontColor-default">请输入姓名或文字</p>
	  		<p class="mt10"><input class="inputSignature" type="text" /></p>
	  		<p class="mt30 fontColor-default">请选择签名样式</p>
	    	<div class="signature-content">
	    		 <table class="signnatureFont">
	    		 	<tbody>
	    		 		<tr>
	    		 			<td class="fontShow tdActive"><span id="webfont01" title="加载完成，可使用手写字体" class="fontStyle01"> </span><img id="webfontLoading01" title="正在加载手写字体..." class="fontLoading" alt="loading" th:src="@{/static/system/images/bar-loading.gif}"></td>
	    		 			<td class="fontShow"><span id="webfont02" title="加载完成，可使用手写字体" class="fontStyle02"> </span><img id="webfontLoading02" title="正在加载手写字体..." class="fontLoading" alt="loading" th:src="@{/static/system/images/bar-loading.gif}"> </td>
	    		 		</tr>
	    		 		<tr>
	    		 			<td class="fontShow"><span id="webfont03" title="加载完成，可使用手写字体" class="fontStyle03"> </span><img id="webfontLoading03" title="正在加载手写字体..." class="fontLoading" alt="loading" th:src="@{/static/system/images/bar-loading.gif}"></td>
	    		 			<td class="fontShow"><span id="webfont04" title="加载完成，可使用手写字体" class="fontStyle04"> </span><img id="webfontLoading04" title="正在加载手写字体..." class="fontLoading" alt="loading" th:src="@{/static/system/images/bar-loading.gif}"></td>
	    		 		</tr> 
	    		 	</tbody>
	    		 </table>
	    		 <canvas id="hiddenCanvas" class="hidenCanvas-css"></canvas>
	    	</div>
    	</div>
    	<div class="footer-bar-container textRight">
    		<span id="signaturePut-error" style="font-size:11px;margin-right:45px;color:#91969d">*友情提示：若字体下方加载条消失，将会使用手写字体哦</span>
    		<span id="signaturePut-submit" title="生成签名" class="btn-success-m">生成签名</span>
    	</div>
    	<!--异步字体初始化声明-->
		<div id="webfontContainer" style="position:absolute;z-index:-9999999;width=0px; height=0px;">
		  	<span id="webfont1" class="handFontStyle01"></span>
		  	<span id="webfont2" class="handFontStyle02"></span>
		  	<span id="webfont3" class="handFontStyle03"></span>
		  	<span id="webfont4" class="handFontStyle04"></span>
		  	<!-- 按此规律可继续添加多个字体 -->
		</div>  
		<!--异步字体处理脚本-->
		<link rel="stylesheet" href="../../../css/font-style.css" th:href="@{/static/system/css/font-style.css}">
		<script type="text/javascript">
		/*1.自定义函数*/
		//获取字节点元素
	    function getChildNodes(ele){var childArr=ele.children || ele.childNodes,childArrTem=new Array();for(var i=0,len=childArr.length;i<len;i++){if(childArr[i].nodeType==1){childArrTem.push(childArr[i]);}}return childArrTem;}		
		//获取css属性值,返回最终样式函数，兼容IE和DOM，设置参数：元素对象、样式特性 
	    function getDefaultStyle(obj,attribute){return obj.currentStyle?obj.currentStyle[attribute]:document.defaultView.getComputedStyle(obj,false)[attribute];} 
		/*2.声明FontFaceObserver*/
		!function(){"use strict";function t(t){l.push(t),1==l.length&&f()}function e(){for(;l.length;)l[0](),l.shift()}function n(t){this.a=u,this.b=void 0,this.f=[];var e=this;try{t(function(t){r(e,t)},function(t){a(e,t)})}catch(n){a(e,n)}}function i(t){return new n(function(e,n){n(t)})}function o(t){return new n(function(e){e(t)})}function r(t,e){if(t.a==u){if(e==t)throw new TypeError;var n=!1;try{var i=e&&e.then;if(null!=e&&"object"==typeof e&&"function"==typeof i)return void i.call(e,function(e){n||r(t,e),n=!0},function(e){n||a(t,e),n=!0})}catch(o){return void(n||a(t,o))}t.a=0,t.b=e,c(t)}}function a(t,e){if(t.a==u){if(e==t)throw new TypeError;t.a=1,t.b=e,c(t)}}function c(e){t(function(){if(e.a!=u)for(;e.f.length;){var t=e.f.shift(),n=t[0],i=t[1],o=t[2],t=t[3];try{0==e.a?o("function"==typeof n?n.call(void 0,e.b):e.b):1==e.a&&("function"==typeof i?o(i.call(void 0,e.b)):t(e.b))}catch(r){t(r)}}})}function s(t){return new n(function(e,n){function i(n){return function(i){a[n]=i,r+=1,r==t.length&&e(a)}}var r=0,a=[];0==t.length&&e(a);for(var c=0;c<t.length;c+=1)o(t[c]).c(i(c),n)})}function d(t){return new n(function(e,n){for(var i=0;i<t.length;i+=1)o(t[i]).c(e,n)})}var f,l=[];f=function(){setTimeout(e)};var u=2;n.prototype.g=function(t){return this.c(void 0,t)},n.prototype.c=function(t,e){var i=this;return new n(function(n,o){i.f.push([t,e,n,o]),c(i)})},window.Promise||(window.Promise=n,window.Promise.resolve=o,window.Promise.reject=i,window.Promise.race=d,window.Promise.all=s,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype["catch"]=n.prototype.g)}(),function(){function t(t,e){d?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function e(t){document.body?t():d?document.addEventListener("DOMContentLoaded",t):document.attachEvent("onreadystatechange",function(){"interactive"!=document.readyState&&"complete"!=document.readyState||t()})}function n(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+e+";"}function o(t){var e=t.a.offsetWidth,n=e+100;return t.f.style.width=n+"px",t.c.scrollLeft=n,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e?(t.g=e,!0):!1}function r(e,n){function i(){var t=r;o(t)&&null!==t.a.parentNode&&n(t.g)}var r=e;t(e.b,i),t(e.c,i),o(e)}function a(t,e){var n=e||{};this.family=t,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}function c(){if(null===l){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(e){}l=""!==t.style.font}return l}function s(t,e){return[t.style,t.weight,c()?t.stretch:"","100px",e].join(" ")}var d=!!document.addEventListener,f=null,l=null,u=!!window.FontFace;a.prototype.load=function(t,o){var a=this,c=t||"BESbswy",d=o||3e3,l=(new Date).getTime();return new Promise(function(t,o){if(u){var h=new Promise(function(t,e){function n(){(new Date).getTime()-l>=d?e():document.fonts.load(s(a,a.family),c).then(function(e){1<=e.length?t():setTimeout(n,25)},function(){e()})}n()}),p=new Promise(function(t,e){setTimeout(e,d)});Promise.race([p,h]).then(function(){t(a)},function(){o(a)})}else e(function(){function e(){var e;(e=-1!=m&&-1!=v||-1!=m&&-1!=y||-1!=v&&-1!=y)&&((e=m!=v&&m!=y&&v!=y)||(null===f&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),f=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))),e=f&&(m==b&&v==b&&y==b||m==g&&v==g&&y==g||m==x&&v==x&&y==x)),e=!e),e&&(null!==T.parentNode&&T.parentNode.removeChild(T),clearTimeout(E),t(a))}function u(){if((new Date).getTime()-l>=d)null!==T.parentNode&&T.parentNode.removeChild(T),o(a);else{var t=document.hidden;!0!==t&&void 0!==t||(m=h.a.offsetWidth,v=p.a.offsetWidth,y=w.a.offsetWidth,e()),E=setTimeout(u,50)}}var h=new n(c),p=new n(c),w=new n(c),m=-1,v=-1,y=-1,b=-1,g=-1,x=-1,T=document.createElement("div"),E=0;T.dir="ltr",i(h,s(a,"sans-serif")),i(p,s(a,"serif")),i(w,s(a,"monospace")),T.appendChild(h.a),T.appendChild(p.a),T.appendChild(w.a),document.body.appendChild(T),b=h.a.offsetWidth,g=p.a.offsetWidth,x=w.a.offsetWidth,u(),r(h,function(t){m=t,e()}),i(h,s(a,'"'+a.family+'",sans-serif')),r(p,function(t){v=t,e()}),i(p,s(a,'"'+a.family+'",serif')),r(w,function(t){y=t,e()}),i(w,s(a,'"'+a.family+'",monospace'))})})},window.FontFaceObserver=a,window.FontFaceObserver.prototype.check=window.FontFaceObserver.prototype.load=a.prototype.load,"undefined"!=typeof module&&(module.exports=window.FontFaceObserver)}();
		//如果有web字体，则添加字体异步加载的监控
		fontsLoadMonitor();
		//字体异步加载监控
		function fontsLoadMonitor(){
			var $fontContainer = document.getElementById("webfontContainer");
			var fonts = getChildNodes($fontContainer);
			for(var i=0; i<fonts.length; i++){
				var fontFamilyName = getDefaultStyle(fonts[i],"font-family");
				fontLoad(fontFamilyName,i+1);
			}
			//设置完信号
			signal=fonts.length;
		}
		function fontLoad(fontFamilyName,seq){
			new FontFaceObserver(fontFamilyName)
				.load(null,300000)
				.then(function(){
					//完成信号改变
					signal--;
					//加载图像对象
					var fontLoadingObj = document.getElementById("webfontLoading0"+seq);
					fontLoadingObj.alt="loaded";
					fontLoadingObj.style.display="none";
					fontLoadingObj.title="";
					//字体文本对象
					var fontObj = document.getElementById("webfont0"+seq);
					fontObj.style.display="";
					fontObj.className = "handFontStyle0"+seq;
					fontObj.title="";
					//消息提示对象
					if(signal<=0){
						var errorTipObj = document.getElementById("signaturePut-error");
						errorTipObj.innerHTML="";
					}
			});
		}
		</script>
	</div>
	<!-- ------------------------------------------- -->
	<!-- "write" block fragment for tab "signatureWrite-link"-->
	<!-- ------------------------------------------- -->
	<div th:fragment="this-copy-sign-write" id="signatureWrite-block" name="write" class="signature-block hidden">
  		<div class="body-content-container">
  			<p class="mt10 fontColor-default">请在下框内写入您的签名</p>
	  		<div id="signatureWrite-content" class="mt10 border-dotted border-radius-default"></div>
	  		<div class="mt10">
	  			<div class="signatureColorOption dis-inline">
	  				<span class="signatureBlack colorOption selectedColor" title="点击设置字体为黑色"></span>
	  				<span class="signatureBlue colorOption" title="点击设置字体为蓝色"></span>
	  				<span class="signatureRed colorOption" title="点击设置字体为红色"></span>
	  			</div>
	  			<div class="dis-inline floatR">
	  			    <div class="dis-inline jSignatureToolsBar"></div>
	  				<span class="signatureReset baseBtn">清空</span>
	  			</div>
	  		</div>
  		</div>
  		<div class="footer-bar-container textRight">
 				<span title="生成签名" class="signatureSave btn-success-m">生成签名</span>
 		</div>
	</div>
	<!-- ------------------------------------------- -->
	<!-- "scan" block fragment for tab "signatureScan-link"-->
	<!-- ------------------------------------------- -->
	<div th:fragment="this-copy-sign-scan" id="signatureScan-block"
		name="scan" style="height:457px;" class="signature-block hidden">
		<div class="body-content-container szsignatureScan">
			<p class="mt10 fontColor-default">扫描下方二维码在手机上签名</p>
			<div class="qrcode_container mt10">
				<div class="js_qrcode_show"></div>
				<div class="szSuggest2 fontColor-default hidden"><p>生成二维码失败，请重新获取二维码！</p></div>
				<div class="szSuggest3 fontColor-default hidden"><p>网络异常，二维码获取失败！</p></div>
				<p class="mt10 fontColor-default szP">扫描二维码后请到移动端手写签名！</p>
			</div>
			<div class="szCanvasDiv" style="width: 100%;">
				<div class="szImgDiv">
					<img id="signPad" src="" class="szImg hidden"/>
				</div>
				<div id="footer-container" class="footer-container">
				<span id="sig-clearBtn" class="btn-primary-m signatureReset">清除</span> <span
					id="sig-submitBtn" title="生成签名" class="signatureSave btn-success-m">生成</span>
			</div>
			</div>
			<div class="generateQrcode creat-doc-enter">重获二维码并扫描</div>			
		</div>
		<div class="szSuggest fontColor-default hidden"><p>您的浏览器不支持扫码签名</p></div>
		<div class="szSuggest1 fontColor-default hidden"><p>网络连接失败，请稍后再试或选用其他签名方式！</p></div>
		<div class="szSuggest4 fontColor-default hidden"><p>网络异常，链接失败！</p></div>
	</div>
	<!-- ------------------------------------------- -->
	<!-- "scan" block fragment for tab "signatureScan-link"-->
	<!-- ------------------------------------------- -->
	<div th:fragment="this-copy-sign-uploadscan" id="uploadScan-block"
		name="scan" style="height:457px;" class="signature-block hidden">
		<div class="body-content-container szsignatureScanupload">
			<p class="mt10 fontColor-default">扫描下方二维码在手机上签名</p>
			<div class="qrcode_container_upload mt10">
				<div class="js_qrcode_show_upload"></div>
				<div class="szupload2 fontColor-default hidden"><p>生成二维码失败，请重新获取二维码！</p></div>
				<div class="szupload3 fontColor-default hidden"><p>网络异常，二维码获取失败！</p></div>
				<p class="mt10 fontColor-default szP">扫描二维码后请到移动端上传签名！</p>
			</div>
			<div class="szCanvasupload" style="width: 100%;">
				<div class="szImgDiv">
					<img id="signPadupload" src="" class="szImg szImgupload hidden"/>
				</div>
				<div id="footer-container-upload" class="footer-container">
				<span id="sig-clearBtn-upload" class="btn-primary-m signatureReset">清除</span> <span
					id="sig-submitBtn-upload" title="生成签名" class="signatureSave btn-success-m">生成</span>
			</div>
			</div>
			<div class="generateQrcodeupload creat-doc-enter">重获二维码并扫描</div>			
		</div>
		<div class="szupload fontColor-default hidden"><p>您的浏览器不支持扫码签名</p></div>
		<div class="szupload1 fontColor-default hidden"><p>网络连接失败，请稍后再试或选用其他签名方式！</p></div>
		<div class="szupload4 fontColor-default hidden"><p>网络异常，链接失败！</p></div>
	</div>
	<!-- ------------------------------------------- -->
	<!-- "upload" block fragment for tab "signatureScan-link"-->
	<!-- ------------------------------------------- -->
	 <div th:fragment="this-copy-sign-upload" id="signatureUpload-block" name="upload" class="signature-block hidden">
  		<div class="body-content-container posR">
  			<p class="fontColor-default">支持图片类型: GIF, JPG, JPEG, PNG, JPE, BMP, TIFF</p>
	  		<p class="fontColor-default">文件大小不超过500KB，建议背景透明</p>
	  		<div class="position-container">
	   			<span class="uplaod-input-container">选择图片文件或拖拽图片到本框<input id="js_sealUpload" class="upload-input-css" type="file" name="file" /></span>
	   		</div>
	   		<div id="signatureUpload-content" class="contain-border mt20">
	   			<div id="imageFiles"></div>
	   		</div>
  		</div>
  	</div>

</body>
</html>
